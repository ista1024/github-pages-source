<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  </head>
  <body style="font-family: consolas">
    <p id="tmpP001"></p>
    <p id="tmpP002">
      <span id="span00201">HttpProvider: </span><span id="span00202"></span>
      <span id="span00203">, connected: </span><span id="span00204"></span>
    </p>
    <p id="tmpP003"></p>
    <input id="input001" />
    <label for="accept">
      <input type="checkbox" id="accept" name="accept" value="yes" /> Accept
    </label>
    <button id="tmpB001">123</button>
    <a id="tmpA001"></a>
    <div class="div1">
      <div class="div1-1">
        <div class="div1-1-1"></div>
        <div class="div1-1"></div>
      </div>
      <div class="div1-2">
        <div class="div1-2-1"></div>
        <div class="div1-2-1"></div>
        <div class="div1-2-1"></div>
        <div class="div1-2-2"></div>
      </div>
    </div>
    <script>
      var httpProvider = "http://192.168.1.80:10010/";
      var web3 = new Web3(new Web3.providers.HttpProvider(httpProvider));

      tmpP001.innerText = `web3 version: ${web3.version}`;

      let eth_net_isListening = async () => {
        return web3.eth.net.isListening();
      };

      let currentProvider = web3.eth.accounts.currentProvider;
      span00202.innerText = `${currentProvider.host}`;

      eth_net_isListening().then((value) => {
        tmpP003.innerText = `eth net isListening: ${value}`;
        console.log("eth_net_isListening", value);
        span00204.innerText = `${currentProvider.connected}`;
      });

      var test_object_01 = (fullNode, val) => {
        for ([key, value] of Object.entries(fullNode[val])) {
          console.log(key, typeof value);
        }
      };

      // var fullNode = web3;

      var result = [];

      // same as Object.getOwnPropertyNames(web3).sort()
      var tmpFunc001 = (currentNode) => {
        result = [];
        Object.getOwnPropertyNames(currentNode)
          .sort()
          .map((value, index) => {
            // console.log(value, typeof currentNode[value]);
            result.push({
              id: index,
              name: value,
              type: typeof currentNode[value],
            });
          });
        return result;
      };

      /*
      var tmpFunc001 = (currentNode) => {
        result = [];
        for ([index, [key, value]] of Object.entries(
          Object.entries(currentNode).sort()
        )) {
          if (value) {
            if (typeof value == "string" || typeof value == "function") {
              // console.log("Object.entries",index, key, typeof value);
              result.push({ id: index, name: key, value: typeof value });
            }
            if (typeof value == "object") {
              // console.log("Object.entries",index, key, typeof value);
              // test_object_01(currentNode, key);
              result.push({ id: index, name: key, value: typeof value });
            }
          } else {
            // console.log("Object.entries",index, key, typeof value);
            result.push({ id: index, name: key, value: typeof value });
          }
        }
        return result;
      };
      */

      const sorted = () => {
        Object.keys(web3)
          .sort()
          .map((x) => {
            console.log(x);
          });
      };

      var wrapSortObject = tmpFunc001;

      /* Things I need to control:
       * 1. currentNode = web3[nodeName]
       * 2. childNodeList = tmpFunc001(currentNode);
       * 3. selectedNode = childNodeList[selectedNodeIndex];
       */
      // currentNode
      var tmpVar001 = web3;
      // childNodeList
      var tmpVar002 = tmpFunc001(tmpVar001);
      // selectedNode
      var tmpVar003 = tmpVar002[1];
      console.log(tmpVar003);
      // newCurrentNode
      var tmpVar004 = tmpVar001[tmpVar003.name];
      // newChildNodeList
      var tmpVar005 = tmpFunc001(tmpVar004);
      // newSelectedNode
      var tmpVar006 = tmpVar005[1];

      var tmp001 = {
        from: "0xd5fAfE2FC1CaF4D365df0a19e52fb43147690E6B",
        to: "0xF0109fC8DF283027b6285cc889F5aA624EaC1F55",
        value: "5000000000000000000",
        gas: "21000",
      };
      var tmp002 =
        "0x19c4921499446a67b418fdc4a9807326481d4e2baea184ac46a81fa9d643ee57";

      var tmpInt001 = 1 << 12;
      var tmpObj001 = {
        title:
          "Apple iPhone 4S Sale Cancelled in Beijing Amid Chaos (Design You Trust)",
        description:
          "Advertise here with BSA Apple cancelled its scheduled sale of iPhone 4S in one of its stores in China\u2019s capital Beijing on January 13. Crowds outside the store in the Sanlitun district were waiting on queues overnight. There were incidents of scuffle between shoppers and the store\u2019s security staff when shoppers, hundreds of them, were told that the sales [...]Source : Design You TrustExplore : iPhone, iPhone 4, Phone",
        link: "http:\/\/wik.io\/info\/US\/309201303",
        timestamp: 1326439500,
        image: null,
        embed: null,
        language: null,
        user: null,
        user_image: null,
        user_link: null,
        user_id: null,
        geo: null,
        source: "wikio",
        favicon: "http:\/\/wikio.com\/favicon.ico",
        type: "blogs",
        domain: "wik.io",
        id: "2388575404943858468",
      };
      console.log(tmpObj001);
      var tmpArr001 = [];
      [...Array(tmpInt001)].map((x) => {
        // tmpObj001["name"] = Math.floor(Math.random() * 1000);
        // tmpObj001["color"] = Math.floor(Math.random() * 1000);
        // tmpObj001["size"] = Math.floor(Math.random() * 1000);
        tmpArr001.push(tmpObj001);
      });

      var tmpFunc002 = (json) => {
        let fileName = "test.csv";
        let dlAnchorElement = document.querySelector("#tmpA001");
        let array = typeof json != "object" ? JSON.parse(json) : json;
        let str = "";
        let row = "";
        for (let index in array[0]) {
          //Now convert each value to string and comma-separated
          row += index + ",";
        }
        console.log(row);
        row = row.slice(0, -1);
        //append Label row with line break
        str += row + "\r\n";
        for (let i = 0; i < array.length; i++) {
          let line = "";
          for (let index in array[i]) {
            if (line != "") line += ",";
            line += array[i][index];
          }
          str += line + "\r\n";
        }
        let blob = new Blob([str], { type: "text/csv" });
        dlAnchorElement.href = window.URL.createObjectURL(blob);

        // dlAnchorElement.setAttribute("href", "data:text/csv;charset=utf-8," + str);
        // let dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(json));
        // dlAnchorElement.setAttribute("href", dataStr);
        dlAnchorElement.setAttribute("download", fileName);
        dlAnchorElement.click();
      };
      var tmpFunc003 = () => {
        fetch("https://httpbin.org/get")
          .then((res) => res.json())
          .then((data) => console.log(data));
      };
    </script>
  </body>
</html>
